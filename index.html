<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tenable Vibrations ‚Äî Costa Rica Retreat ‚Ä¢ Jan 15‚Äì18, 2026 (v-CR-006)</title>
<meta name="description" content="Light, airy, tropical vibes. Join the waitlist and try our interactive tools for your personalized path to calm & focus." />
<meta property="og:title" content="Tenable Vibrations ‚Äî Costa Rica Retreat" />
<meta property="og:description" content="Reset your nervous system in Costa Rica. Get your personalized plan now." />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop" />
<meta name="theme-color" content="#F7EFE6" />
<link rel="preconnect" href="https://images.unsplash.com">

<style>
  /* ====== Light Tropical Theme (Tulum-ish) ====== */
  :root{
    /* palette */
    --sand:#FFF7EE;
    --seafoam:#E9FFF5;
    --aqua:#79E8D3;
    --teal:#1F6E68;
    --coral:#FF9E8A;
    --sun:#FFC876;
    --leaf:#7BCB9B;
    --ink:#1F3A39;       /* primary text (dark teal/ink) */
    --muted:#5E8E8A;     /* secondary text */
    /* surfaces */
    --bg-grad: linear-gradient(180deg,#FFF7EE 0%, #F3FFF9 100%);
    --hero-veil: rgba(255,255,255,.78);  /* soft white veil for readability */
    --card:#FFFFFF;       /* solid white cards for clarity */
    --line: rgba(0,0,0,.08);
    --shadow: 0 18px 45px rgba(31,58,57,.08);
  }
  *{box-sizing:border-box}
  html,body{
    margin:0;padding:0;color:var(--ink);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background:var(--bg-grad)
  }
  a{color:var(--teal);text-decoration:none}
  .wrap{max-width:1160px;margin:0 auto;padding:22px}
  .nav{
    position:sticky;top:0;z-index:50;
    background:rgba(255,255,255,.65);
    backdrop-filter: blur(8px);
    border-bottom:1px solid var(--line);
  }
  .nav-inner{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--aqua),#B4FFE9);box-shadow:0 0 0 3px rgba(121,232,211,.35)}
  .links a{margin-left:14px;font-weight:700;opacity:.9}
  /* Hero */
  .hero{
    position:relative; isolation:isolate;
    background:
      linear-gradient(180deg,var(--hero-veil),var(--hero-veil)),
      url('https://images.unsplash.com/photo-1517451330947-7809dead78d5?q=80&w=1920&auto=format&fit=crop&tvv=6');
    background-size:cover;background-position:center;
    border-bottom:1px solid var(--line);
  }
  .hero .wrap{padding:72px 22px 40px}
  .badge{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:999px;background:#FFFFFF;border:1px solid var(--line);color:#7C5A00;font-weight:800}
  h1{font-size:46px;line-height:1.06;margin:10px 0 10px;color:var(--ink)}
  p.lead{font-size:18px;color:var(--muted);max-width:780px}
  .grid{display:grid;gap:20px}
  .cols-2{grid-template-columns:1.2fr 1fr}
  .cols-3{grid-template-columns:repeat(3,1fr)}
  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:18px;
    box-shadow: var(--shadow);
  }
  .pad{padding:22px}
  label{font-weight:800;font-size:14px;margin-bottom:6px;display:block}
  input,select,button,textarea{
    width:100%;padding:12px 14px;border-radius:12px;
    border:1px solid var(--line);
    background:#FAFFFD;color:var(--ink);font-size:15px
  }
  button{
    cursor:pointer;
    background:linear-gradient(135deg,var(--coral),#FFBCAE);
    color:#442016; font-weight:900;letter-spacing:.3px;border:none
  }
  button:hover{transform:translateY(-1px);box-shadow:0 12px 24px rgba(255,158,138,.25)}
  button:disabled{opacity:.6;cursor:not-allowed}
  .stat{padding:16px;border-radius:14px;background:#FFF8F1;border:1px dashed var(--line);text-align:center}
  .countdown{font-variant-numeric:tabular-nums;font-weight:800;color:#AA6B00}
  .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:999px;background:#F3FFF9;border:1px solid var(--line);font-size:13px;color:var(--teal)}
  .section{margin:32px 0}
  .section h2{font-size:28px;margin:0 0 8px}
  .muted{color:var(--muted)}
  .split{display:grid;gap:18px;grid-template-columns:1fr 1fr}
  .qa{display:grid;gap:12px}
  .faq p{margin:10px 0}
  .tabs{display:flex;gap:10px;margin-bottom:12px;flex-wrap:wrap}
  .tab{padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:#FFFFFF;cursor:pointer;font-weight:800;color:var(--ink)}
  .tab.active{background:linear-gradient(135deg,#FFE9C2,#FFDCA0);color:#3c2a00;border-color:rgba(0,0,0,.1)}
  .panel{display:none}
  .panel.active{display:block}
  .tile{padding:16px;border:1px solid var(--line);border-radius:14px;margin:10px 0;background:#FFFFFF}
  .opt{display:flex;gap:10px;align-items:flex-start;margin:10px 0}
  .opt input{width:auto}
  .result{border-left:4px solid var(--leaf);padding-left:14px;background:#F6FFF9;border:1px solid var(--line);border-radius:12px}
  .story-stage{padding:14px;border-left:3px solid var(--sun); margin:14px 0;background:#FFFDF6;border:1px solid var(--line);border-radius:12px}
  .footer{opacity:.95;padding:30px 0}
  /* Decorative palms */
  .bg-fronds{
    position:absolute; inset:0; pointer-events:none; opacity:.22;
    background:
      url('https://images.unsplash.com/photo-1549880338-65ddcdfd017b?q=80&w=2200&auto=format&fit=crop&tvv=6') bottom right / 880px no-repeat,
      url('https://images.unsplash.com/photo-1606923829579-0cb981a83e2e?q=80&w=2200&auto=format&fit=crop&tvv=6') top left / 640px no-repeat;
    mix-blend-mode:multiply;
  }
  @media (max-width:980px){ .cols-2,.cols-3,.split{grid-template-columns:1fr} h1{font-size:36px}}
  @media (prefers-reduced-motion: reduce){ *{scroll-behavior:auto} }
</style>

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Event",
  "name":"Tenable Vibrations Costa Rica Retreat",
  "startDate":"2026-01-15",
  "endDate":"2026-01-18",
  "eventAttendanceMode":"https://schema.org/OfflineEventAttendanceMode",
  "eventStatus":"https://schema.org/EventScheduled",
  "location":{"@type":"Place","name":"Costa Rica"},
  "image":["https://images.unsplash.com/photo-1518684079-3c830dcef090?q=80&w=1600&auto=format&fit=crop"],
  "description":"A 3‚Äì4 day breathwork, cold immersion, and purpose-reset immersion.",
  "organizer":{"@type":"Organization","name":"Tenable Vibrations","url":"https://www.tenablevibrations.com"}
}
</script>
</head>
<body>

<!-- ===== Nav ===== -->
<div class="nav">
  <div class="wrap nav-inner">
    <div class="brand">
      <div class="logo"></div>
      <b>Tenable Vibrations</b>
    </div>
    <div class="links">
      <a href="#waitlist">Waitlist</a>
      <a href="#interactives">Personalize</a>
      <a href="#itinerary">Itinerary</a>
      <a href="#faq">FAQ</a>
    </div>
  </div>
</div>

<!-- ===== Hero ===== -->
<header class="hero">
  <div class="bg-fronds"></div>
  <div class="wrap">
    <span class="badge">Costa Rica ‚Ä¢ Jan 15‚Äì18, 2026 üå¥</span>
    <h1>Sun on your face. Calm in your body. <br/>Leave lighter, come back stronger.</h1>
    <p class="lead">Three and a half days of breathwork, ocean dips, movement, and nature‚Äîbuilt for high-performers who want clarity, resilience, and sustainable energy.</p>

    <div class="grid cols-2 section">
      <div class="card pad">
        <div class="grid cols-3">
          <div class="stat"><div class="muted">Countdown</div><div id="cd" class="countdown">‚Äî</div></div>
          <div class="stat"><div class="muted">Format</div><div><strong>Small group</strong> ‚Ä¢ 16 spots</div></div>
          <div class="stat"><div class="muted">Focus</div><div>Breathwork ‚Ä¢ Cold ‚Ä¢ Purpose</div></div>
        </div>
        <div style="margin-top:12px" class="pill">Early-bird opens to waitlist first</div>
      </div>

      <!-- Waitlist -->
      <div class="card pad" id="waitlist">
        <h2>Get early access</h2>
        <p class="muted">Join the waitlist for early-bird pricing, first access to rooms, and a free ‚Äú7-Day Nervous-System Reset.‚Äù</p>

        <!-- Make live later by adding a real endpoint below -->
        <form id="wl" class="qa" action="" method="POST" novalidate>
          <div>
            <label for="name">Full name</label>
            <input id="name" name="name" autocomplete="name" required />
          </div>
          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" autocomplete="email" required />
          </div>
          <div>
            <label for="interest">Primary goal</label>
            <select id="interest" name="interest" required>
              <option value="">Choose‚Ä¶</option>
              <option>Stress reduction & resilience</option>
              <option>Peak performance & focus</option>
              <option>Recovery & sleep</option>
              <option>Community & adventure</option>
            </select>
          </div>

          <!-- optional UTM capture -->
          <input type="hidden" name="utm_source" id="utm_source">
          <input type="hidden" name="utm_medium" id="utm_medium">
          <input type="hidden" name="utm_campaign" id="utm_campaign">
          <input type="hidden" name="utm_content" id="utm_content">
          <input type="hidden" name="utm_term" id="utm_term">

          <button id="wlBtn" type="submit">Join the Waitlist</button>
          <small class="muted">We‚Äôll never spam. Unsubscribe anytime.</small>
        </form>

        <div id="thanks" class="muted" style="display:none;margin-top:8px;">
          ‚úÖ You‚Äôre on the list! Check your inbox for the ‚Äú7-Day Nervous-System Reset.‚Äù
        </div>
        <div id="error" style="display:none;margin-top:8px;color:#a64834;">
          ‚ùå Submission failed. Please try again.
        </div>
      </div>
    </div>
  </div>
</header>

<!-- ===== Interactive Experiences ===== -->
<main class="wrap" id="interactives">
  <section class="section">
    <h2>Find your personalized path üå∫</h2>
    <p class="muted">Pick an interactive below. Each gives you tailored drills and a mini-plan you can download.</p>

    <div class="tabs" id="tabs">
      <div class="tab active" data-panel="archetype">Nervous System Archetype</div>
      <div class="tab" data-panel="choose">Choose-Your-Own Retreat</div>
      <div class="tab" data-panel="readiness">Breathwork Readiness Score</div>
    </div>

    <!-- Panel 1: Archetype Quiz -->
    <div class="panel active card pad" id="panel-archetype">
      <h3>Nervous System Archetype (2‚Äì3 min)</h3>
      <p class="muted">Answer a few quick questions to reveal your profile and get a targeted drill.</p>

      <form id="archetypeForm">
        <div class="tile">
          <div><b>1)</b> When stress spikes, what happens first?</div>
          <label class="opt"><input type="radio" name="q1" value="overthinker" required> Mind races; hard to slow thoughts</label>
          <label class="opt"><input type="radio" name="q1" value="grinder"> Power through; body feels wired</label>
          <label class="opt"><input type="radio" name="q1" value="zen-surface"> Look calm outside; tight inside</label>
          <label class="opt"><input type="radio" name="q1" value="balanced"> I notice & regulate fairly well</label>
        </div>

        <div class="tile">
          <div><b>2)</b> Mid-afternoon energy feels‚Ä¶</div>
          <label class="opt"><input type="radio" name="q2" value="overthinker" required> Mentally fried</label>
          <label class="opt"><input type="radio" name="q2" value="grinder"> Jittery but pushing</label>
          <label class="opt"><input type="radio" name="q2" value="zen-surface"> Flat but pretending fine</label>
          <label class="opt"><input type="radio" name="q2" value="balanced"> Pretty steady</label>
        </div>

        <div class="tile">
          <div><b>3)</b> Sleep pattern most nights?</div>
          <label class="opt"><input type="radio" name="q3" value="overthinker" required> Hard to fall asleep</label>
          <label class="opt"><input type="radio" name="q3" value="grinder"> Crash fast, wake wired</label>
          <label class="opt"><input type="radio" name="q3" value="zen-surface"> Light/uneven, body feels tense</label>
          <label class="opt"><input type="radio" name="q3" value="balanced"> Sleep fine</label>
        </div>

        <div class="tile">
          <div><b>4)</b> Training preference today?</div>
          <label class="opt"><input type="radio" name="q4" value="overthinker" required> Downshift the mind</label>
          <label class="opt"><input type="radio" name="q4" value="grinder"> Channel intensity</label>
          <label class="opt"><input type="radio" name="q4" value="zen-surface"> Release hidden tension</label>
          <label class="opt"><input type="radio" name="q4" value="balanced"> Performance tune-up</label>
        </div>

        <button id="archBtn" type="submit">See my archetype</button>
      </form>

      <div id="archResult" style="display:none;margin-top:16px"></div>
    </div>

    <!-- Panel 2: Choose-Your-Own Adventure -->
    <div class="panel card pad" id="panel-choose">
      <h3>Choose-Your-Own Retreat Adventure (2 min)</h3>
      <p class="muted">Walk through Day 1 scenes. Your choices reveal your retreat persona and a custom mini-itinerary.</p>

      <div id="story">
        <div class="story-stage" data-step="1">
          <b>Sunrise in Costa Rica.</b> You wake to ocean air and birdsong. First move?
          <div class="qa">
            <button class="choice" data-next="2a" data-tag="clarity" type="button">Guided breath by the beach</button>
            <button class="choice" data-next="2b" data-tag="adventure" type="button">Ocean dip / cold immersion</button>
            <button class="choice" data-next="2c" data-tag="integration" type="button">Journal under a palm</button>
          </div>
        </div>

        <div class="story-stage" data-step="2a" style="display:none">
          <b>Beach breath.</b> Slow nasal breathing settles your system. What now?
          <div class="qa">
            <button class="choice" data-next="3a" data-tag="clarity" type="button">CO‚ÇÇ tolerance test</button>
            <button class="choice" data-next="3b" data-tag="community" type="button">Invite two others to join</button>
          </div>
        </div>

        <div class="story-stage" data-step="2b" style="display:none">
          <b>Cold immersion.</b> You enter calmly, exhale slow. Next?
          <div class="qa">
            <button class="choice" data-next="3c" data-tag="performance" type="button">Mobility flow</button>
            <button class="choice" data-next="3d" data-tag="adventure" type="button">Beach run</button>
          </div>
        </div>

        <div class="story-stage" data-step="2c" style="display:none">
          <b>Journaling.</b> You write one intention. Next?
          <div class="qa">
            <button class="choice" data-next="3e" data-tag="integration" type="button">Integration circle</button>
            <button class="choice" data-next="3f" data-tag="clarity" type="button">Guided breath journey</button>
          </div>
        </div>

        <!-- End nodes -->
        <div class="story-stage" data-step="3a" style="display:none"><b>Nice.</b> Your awareness grows. <button class="endstory" type="button">Finish</button></div>
        <div class="story-stage" data-step="3b" style="display:none"><b>Leadership.</b> You bring others along. <button class="endstory" type="button">Finish</button></div>
        <div class="story-stage" data-step="3c" style="display:none"><b>Strong choice.</b> You balance stress with mobility. <button class="endstory" type="button">Finish</button></div>
        <div class="story-stage" data-step="3d" style="display:none"><b>Power on.</b> You crave challenge. <button class="endstory" type="button">Finish</button></div>
        <div class="story-stage" data-step="3e" style="display:none"><b>Community.</b> You heal in circles. <button class="endstory" type="button">Finish</button></div>
        <div class="story-stage" data-step="3f" style="display:none"><b>Depth work.</b> Ready for inner shifts. <button class="endstory" type="button">Finish</button></div>
      </div>

      <div id="storyResult" style="display:none;margin-top:16px"></div>
    </div>

    <!-- Panel 3: Readiness Score -->
    <div class="panel card pad" id="panel-readiness">
      <h3>Breathwork Readiness Score (1‚Äì2 min)</h3>
      <p class="muted">A quick diagnostic to estimate your regulation baseline. Get a score + 7-day progression.</p>

      <form id="readyForm">
        <div class="tile">
          <div><b>1)</b> How many deep sighs or mouth breaths before noon?</div>
          <label class="opt"><input type="radio" name="r1" value="0" required> 0‚Äì1</label>
          <label class="opt"><input type="radio" name="r1" value="-5"> 2‚Äì4</label>
          <label class="opt"><input type="radio" name="r1" value="-10"> 5+</label>
        </div>
        <div class="tile">
          <div><b>2)</b> Screen time yesterday?</div>
          <label class="opt"><input type="radio" name="r2" value="5" required> ‚â§3h</label>
          <label class="opt"><input type="radio" name="r2" value="0"> 3‚Äì6h</label>
          <label class="opt"><input type="radio" name="r2" value="-5"> 6h+</label>
        </div>
        <div class="tile">
          <div><b>3)</b> Comfortable breath-hold (after normal exhale)?</div>
          <label class="opt"><input type="radio" name="r3" value="-5" required> <15s</label>
          <label class="opt"><input type="radio" name="r3" value="0"> 15‚Äì25s</label>
          <label class="opt"><input type="radio" name="r3" value="5"> >25s</label>
        </div>
        <div class="tile">
          <div><b>4)</b> Sleep quality last 3 nights?</div>
          <label class="opt"><input type="radio" name="r4" value="-5" required> Poor</label>
          <label class="opt"><input type="radio" name="r4" value="0"> Mixed</label>
          <label class="opt"><input type="radio" name="r4" value="5"> Good</label>
        </div>
        <div class="tile">
          <div><b>5)</b> Current stress (feel truthfully)?</div>
          <label class="opt"><input type="radio" name="r5" value="-10" required> High</label>
          <label class="opt"><input type="radio" name="r5" value="-5"> Medium</label>
          <label class="opt"><input type="radio" name="r5" value="0"> Low</label>
        </div>
        <button id="readyBtn" type="submit">Get my score</button>
      </form>

      <div id="readyResult" style="display:none;margin-top:16px"></div>
    </div>
  </section>

  <!-- Itinerary/Who -->
  <section class="section split" id="itinerary">
    <div class="card pad" style="background:linear-gradient(180deg,#FFFFFF, #FFF8EE)">
      <h2>Sample itinerary</h2>
      <div class="tile"><b>AM</b> ‚Äî Breath + mobility ‚Üí ocean/ice cold immersion ‚Üí nourishing breakfast</div>
      <div class="tile"><b>Midday</b> ‚Äî Workshops: breathing mechanics, state control, nervous system education</div>
      <div class="tile"><b>Afternoon</b> ‚Äî Nature time: surf/hike or recovery</div>
      <div class="tile"><b>Evening</b> ‚Äî Deeper breath journeys, integration circles, journaling</div>
    </div>
    <div class="card pad" style="background:linear-gradient(180deg,#FFFFFF,#F3FFF9)">
      <h2>Who it‚Äôs for</h2>
      <ul>
        <li>Founders, execs, athletes & creators seeking clarity and recovery</li>
        <li>Beginners welcome; opt-in intensity and safety briefings</li>
        <li>Small-group community in a breathtaking setting</li>
      </ul>
      <div class="pill" style="margin-top:10px;">Limited to 16 spots ‚Ä¢ Early-bird opens to waitlist first</div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="section card pad faq" id="faq" style="background:linear-gradient(180deg,#FFFFFF,#F8FFFB)">
    <h2>FAQ</h2>
    <p><b>Is this suitable for beginners?</b> Yes. You‚Äôll get progressions for every drill.</p>
    <p><b>Do I need to be comfortable with cold?</b> No. We progress gradually with breath-led protocols.</p>
    <p><b>What‚Äôs included?</b> Coaching, programming, sessions, and community activities. Lodging/travel specifics go to the waitlist first.</p>
  </section>
</main>

<footer class="wrap footer">
  <div class="muted">¬© Tenable Vibrations. Pre-launch preview. <a href="https://www.tenablevibrations.com" target="_blank" rel="noopener">Main site</a></div>
</footer>

<!-- version chip -->
<div style="position:fixed;right:10px;bottom:10px;background:#FFFFFF;color:#25625D;border:1px solid var(--line);border-radius:10px;padding:6px 10px;font:700 12px/1.2 system-ui;z-index:9999;opacity:.95;box-shadow:0 8px 18px rgba(0,0,0,.06)">
  TV Build v-CR-006
</div>

<script>
/* Helpers */
const smoothScrollTo = (el)=>{ try{ el.scrollIntoView({behavior:'smooth', block:'start'});}catch(_){ location.hash='#'+el.id; } };

/* ===== Countdown ===== */
(function(){
  const target = new Date('2026-01-15T08:00:00-06:00'); // adjust TZ if needed
  const el = document.getElementById('cd');
  function tick(){
    const now = new Date();
    const diff = target - now;
    if(diff<=0){el.textContent='It‚Äôs retreat time!';return;}
    const d = Math.floor(diff/86400000);
    const h = Math.floor((diff%86400000)/3600000);
    const m = Math.floor((diff%3600000)/60000);
    el.textContent = `${d}d ${h}h ${m}m`;
  }
  tick(); setInterval(tick, 60000);
})();

/* ===== Tabs ===== */
document.querySelectorAll('.tab').forEach(tab=>{
  tab.addEventListener('click', ()=>{
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    tab.classList.add('active');
    const p = document.getElementById('panel-'+tab.dataset.panel);
    p.classList.add('active');
    smoothScrollTo(p);
  });
});

/* ===== UTM capture for waitlist ===== */
(function(){
  const qs=new URLSearchParams(location.search);
  ['source','medium','campaign','content','term'].forEach(k=>{
    const el=document.getElementById('utm_'+k);
    if(el) el.value = qs.get('utm_'+k) || '';
  });
})();

/* ===== Waitlist form ===== */
(function(){
  const form = document.getElementById('wl');
  if(!form) return;
  const thanks = document.getElementById('thanks');
  const err = document.getElementById('error');
  const btn = document.getElementById('wlBtn');
  const FORM_ENDPOINT = ""; // ‚Üê paste your Formspree/ESP endpoint to go live

  form.addEventListener('submit', async function(e){
    e.preventDefault();
    err.style.display='none';
    btn.disabled = true;

    const data = new FormData(form);
    const payload = Object.fromEntries(data.entries());

    // Local demo save
    try {
      const leads = JSON.parse(localStorage.getItem('tv_waitlist')||'[]');
      leads.push({ ...payload, ts: Date.now() });
      localStorage.setItem('tv_waitlist', JSON.stringify(leads));
    } catch(_){}

    // Live submission (if endpoint provided)
    if(FORM_ENDPOINT){
      try{
        const res = await fetch(FORM_ENDPOINT, { method:'POST', body:new FormData(form), headers:{'Accept':'application/json'} });
        if(!res.ok) throw new Error('Bad response');
      }catch(ex){
        console.warn('Live submit failed:', ex);
        err.style.display='block';
      }
    }
    form.reset();
    thanks.style.display='block';
    btn.disabled = false;
    smoothScrollTo(thanks);
  });
})();

/* ===== Archetype Quiz ===== */
(function(){
  const form = document.getElementById('archetypeForm');
  const out = document.getElementById('archResult');
  const btn = document.getElementById('archBtn');
  if(!form) return;

  const archetypes = {
    "overthinker": {
      title: "The Overthinker",
      blurb: "Mind races under load; goal is downshift on demand.",
      drill: "Box breathing 4‚Ä¢4‚Ä¢4‚Ä¢4 for 3‚Äì5 min, then extend exhales (6‚Äì8s).",
      plan: [
        "AM: 5 min nasal box breathing + 2 min mobility",
        "Midday: 3√ó sigh-reset (long exhale) before meetings",
        "PM: 6‚Äì8s exhale breathing in low light, 5‚Äì8 min"
      ]
    },
    "grinder": {
      title: "The Grinder",
      blurb: "You push hard; learn to toggle intensity and recover faster.",
      drill: "Cadence breathing 4 in / 6 out while walking (10 min).",
      plan: [
        "AM: 6/6 cadence walk 10‚Äì15 min",
        "Pre-workout: 2 min power breaths then nasal only",
        "PM: 5 min downshift before sleep"
      ]
    },
    "zen-surface": {
      title: "Zen-on-Surface",
      blurb: "Looks calm, tension stored inside; release + regulate.",
      drill: "Breath-led mobility: 3-sec inhale / 7-sec exhale per rep.",
      plan: [
        "AM: 8 min mobility with slow exhale",
        "Midday: body scan + 3 long exhales",
        "PM: gentle coherent breathing 5/5 for 10 min"
      ]
    },
    "balanced": {
      title: "Balanced Performer",
      blurb: "Solid baseline; layer performance protocols.",
      drill: "CO‚ÇÇ tolerance test + cadence 5/5; finish with 3 cool-down breaths.",
      plan: [
        "AM: 10 min coherent breathing 5/5",
        "Pre-stress: 3 long exhales + focus cue",
        "PM: 5 min downshift + journaling"
      ]
    }
  };

  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    if(btn) btn.disabled = true;

    // Validate all questions answered
    const requiredQs = ['q1','q2','q3','q4'];
    for(const q of requiredQs){
      if(!new FormData(form).get(q)){
        alert('Please answer all questions.'); if(btn) btn.disabled=false; return;
      }
    }

    // Tally answers ‚Üí archetype
    const counts = { "overthinker":0, "grinder":0, "zen-surface":0, "balanced":0 };
    requiredQs.forEach(q=>{
      const v = new FormData(form).get(q);
      if(v) counts[v] = (counts[v]||0) + 1;
    });
    const archetype = Object.entries(counts).sort((a,b)=>b[1]-a[1])[0][0];
    const a = archetypes[archetype];

    out.style.display='block';
    out.innerHTML = `
      <div class="result" id="archAnchor">
        <h4>Your Archetype: <span style="color:${archetype==='balanced'?'#1F6E68':(archetype==='grinder'?'#F67F5A':'#7BCB9B')}">${a.title}</span></h4>
        <p class="muted">${a.blurb}</p>
        <p><b>Today‚Äôs drill:</b> ${a.drill}</p>
        <div class="tile">
          <b>7-Day Mini-Plan</b>
          <ul>${a.plan.map(x=>`<li>${x}</li>`).join('')}</ul>
        </div>
        <div class="qa">
          <label>Email to receive a printable plan (optional)</label>
          <div class="split">
            <input id="archEmail" type="email" placeholder="you@example.com" />
            <button id="archDownload" type="button">Download Plan</button>
          </div>
        </div>
      </div>
    `;
    smoothScrollTo(document.getElementById('archAnchor'));
    if(btn) btn.disabled = false;

    // download handler
    setTimeout(()=>{
      const dl = document.getElementById('archDownload');
      dl?.addEventListener('click', ()=>{
        const email = document.getElementById('archEmail')?.value.trim();
        if(email){
          try{
            const leads = JSON.parse(localStorage.getItem('tv_tools')||'[]');
            leads.push({tool:'archetype', email, archetype, ts:Date.now()});
            localStorage.setItem('tv_tools', JSON.stringify(leads));
          }catch(_){}
        }
        const text =
`Tenable Vibrations ‚Äî ${a.title}
${a.blurb}

Today‚Äôs drill:
- ${a.drill}

7-Day Mini-Plan:
- ${a.plan.join('\n- ')}

Costa Rica Retreat ‚Ä¢ Jan 15‚Äì18, 2026
Join the waitlist for early-bird access.`;
        const blob = new Blob([text],{type:'text/plain'});
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url; link.download = `TV-${a.title.replace(/\s+/g,'_')}-MiniPlan.txt`;
        document.body.appendChild(link); link.click(); link.remove();
        URL.revokeObjectURL(url);
      });
    },50);
  });
})();

/* ===== Choose-Your-Own Story ===== */
(function(){
  const story = document.getElementById('story');
  const out = document.getElementById('storyResult');
  if(!story) return;
  let tags = [];

  story.addEventListener('click', (e)=>{
    const btn = e.target.closest('.choice');
    if(btn){
      const next = btn.dataset.next;
      const tag = btn.dataset.tag;
      if(tag) tags.push(tag);
      story.querySelectorAll('.story-stage').forEach(s=>s.style.display='none');
      const nxt = story.querySelector(`[data-step="${next}"]`);
      if(nxt) nxt.style.display='block';
    }
    if(e.target.classList.contains('endstory')){
      const tallies = tags.reduce((m,t)=>(m[t]=(m[t]||0)+1,m),{});
      const persona = Object.entries(tallies).sort((a,b)=>b[1]-a[1])[0]?.[0] || 'clarity';
      const map = {
        clarity:{ title:'Clarity-Seeker', plan:['Coherent 5/5 AM 10 min','CO‚ÇÇ test mid-day','Evening long exhale 6‚Äì8s'] },
        adventure:{ title:'Stress-Breaker (Adventurer)', plan:['Cold immersion progression','Breath-led mobility 10 min','Downshift before sleep'] },
        integration:{ title:'Integration-Focused', plan:['Morning journal + 3 long exhales','Guided breath journey','Community circle + reflection'] },
        performance:{ title:'Performance-Chaser', plan:['Cadence walk 4/6','Pre-meeting focus cue','PM downshift 5 min'] },
        community:{ title:'Community-Driver', plan:['Pair drills','Teach a 2-min reset to a friend','Evening circle + breath'] }
      };
      const p = map[persona] || map.clarity;

      out.style.display='block';
      out.innerHTML = `
        <div class="result" id="storyAnchor">
          <h4>Your persona: <span style="color:#1F6E68">${p.title}</span></h4>
          <p class="muted">Here‚Äôs a mini-itinerary that matches how you like to move.</p>
          <div class="tile">
            <b>Custom Day Plan</b>
            <ul>${p.plan.map(x=>`<li>${x}</li>`).join('')}</ul>
          </div>
          <div class="qa">
            <label>Email to send a pretty version (optional)</label>
            <div class="split">
              <input id="storyEmail" type="email" placeholder="you@example.com" />
              <button id="storyDownload" type="button">Download Itinerary</button>
            </div>
          </div>
        </div>
      `;
      smoothScrollTo(document.getElementById('storyAnchor'));

      setTimeout(()=>{
        document.getElementById('storyDownload')?.addEventListener('click', ()=>{
          const email = document.getElementById('storyEmail')?.value.trim();
          if(email){
            try{
              const leads = JSON.parse(localStorage.getItem('tv_tools')||'[]');
              leads.push({tool:'story', email, persona:p.title, ts:Date.now()});
              localStorage.setItem('tv_tools', JSON.stringify(leads));
            }catch(_){}
          }
          const text = `Tenable Vibrations ‚Äî ${p.title}\nMini-Itinerary:\n- ${p.plan.join('\n- ')}\n\nCosta Rica Retreat ‚Ä¢ Jan 15‚Äì18, 2026\nJoin the waitlist for early-bird access.`;
          const blob = new Blob([text],{type:'text/plain'});
          const url = URL.createObjectURL(blob);
          const link = document.createElement('a');
          link.href = url; link.download = `TV-${p.title.replace(/\s+/g,'_')}-Itinerary.txt`;
          document.body.appendChild(link); link.click(); link.remove();
          URL.revokeObjectURL(url);
        });
      },50);
    }
  });
})();

/* ===== Readiness Score ===== */
(function(){
  const form = document.getElementById('readyForm');
  const out = document.getElementById('readyResult');
  const btn = document.getElementById('readyBtn');
  if(!form) return;

  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    btn.disabled = true;

    const fd = new FormData(form);
    for(const k of ['r1','r2','r3','r4','r5']){ if(!fd.get(k)){ alert('Please answer all questions.'); btn.disabled=false; return; } }

    let score = 50; // baseline
    ['r1','r2','r3','r4','r5'].forEach(k=> score += parseInt(fd.get(k)||'0',10));
    let tier = 'Beginner', color = '#FF9E8A', plan = [
      'Coherent breathing 5/5 for 6‚Äì8 min daily',
      '3√ó long-exhale resets before meetings',
      'Low-light downshift 5 min before sleep'
    ];
    if(score>=60 && score<75){ tier='Intermediate'; color='#FFC876'; plan=[
      'Cadence walk 4/6 for 12 min',
      'CO‚ÇÇ tolerance test 2√ó/week',
      'Evening 6‚Äì8s exhale breathing 8‚Äì10 min'
    ];}
    if(score>=75){ tier='Advanced'; color='#1F6E68'; plan=[
      'Coherent 5/5 (10‚Äì12 min) + nasal training',
      'Pre-stress protocol: 3 long exhales + focus cue',
      'Cold progression 2‚Äì3√ó/week with controlled breathing'
    ];}

    out.style.display='block';
    out.innerHTML = `
      <div class="result" id="readyAnchor">
        <h4>Your Readiness Score: <span style="color:${color}">${score}</span> / 100 ‚Äî ${tier}</h4>
        <p class="muted">Here‚Äôs a 7-day progression based on your score.</p>
        <div class="tile">
          <b>7-Day Progression</b>
          <ul>${plan.map(x=>`<li>${x}</li>`).join('')}</ul>
        </div>
        <div class="qa">
          <label>Email to receive a printable plan (optional)</label>
          <div class="split">
            <input id="readyEmail" type="email" placeholder="you@example.com" />
            <button id="readyDownload" type="button">Download Plan</button>
          </div>
        </div>
      </div>
    `;
    smoothScrollTo(document.getElementById('readyAnchor'));
    btn.disabled = false;

    setTimeout(()=>{
      document.getElementById('readyDownload')?.addEventListener('click', ()=>{
        const email = document.getElementById('readyEmail')?.value.trim();
        if(email){
          try{
            const leads = JSON.parse(localStorage.getItem('tv_tools')||'[]');
            leads.push({tool:'readiness', email, score, tier, ts:Date.now()});
            localStorage.setItem('tv_tools', JSON.stringify(leads));
          }catch(_){}
        }
        const text = `Tenable Vibrations ‚Äî Readiness ${score}/100 (${tier})\n7-Day Plan:\n- ${plan.join('\n- ')}\n\nCosta Rica Retreat ‚Ä¢ Jan 15‚Äì18, 2026\nJoin the waitlist for early-bird access.`;
        const blob = new Blob([text],{type:'text/plain'});
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url; link.download = `TV-Readiness-${score}.txt`;
        document.body.appendChild(link); link.click(); link.remove();
        URL.revokeObjectURL(url);
      });
    },50);
  });
})();
</script>
</body>
</html>
